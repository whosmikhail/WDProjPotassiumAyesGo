<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Loot & Learn: Create Flashcard</title>
        
        <link rel="icon" type="png" href="../Assets/image-1.png">
        <link rel="stylesheet" href="../index.css">
        <link rel="script" href="../index.js">

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=TikTok+Sans:opsz,wght@12..36,300..900&display=swap" rel="stylesheet">
    </head>
    <body onload="update()">
        <div class="body-container">
            <nav>
                <ul>
                    <li><a href="../index.html">Home</a></li>
                    <li><a href="game.html">Play!</a></li>
                    <li><a href="collect.html">Collection</a></li>
                    <li><a href="gacha.html">Gacha</a></li>
                </ul>
            </nav>
            <div class="flashcard-container" id="flashcard-container">
                <div class="group" name="group" id="zilch">
                    <label for="group" class="group-label">Untitled Group 1:</label>
                    <div class="flashcard " id="zilch"><p></p><p style="opacity: 0;"></p><button id="reveal" onclick="RevealAnswer(this)">Reveal Answer</button></div>
                </div>
            </div>
            <button id="group-select" onclick="NewGroup()" popovertarget="group-form">New Group:</button>
        </div>

        <div class="create-container">
            <div class="flashcard" id="plus">
                <label for="Question">Question:</label>
                <input class="Question" id="Question">
                <label for="Answer">Answer:</label>
                <input class="Answer" id="Answer">
            </div>

            <button class="submit" onclick="CreateFlashcard()">CREATE</button>
        </div>
        <script>
            let questionnum = 0
            let groupnum = 1
            let container = document.getElementById('flashcard-container');
            let qgrouplist = []
            let agrouplist = []
            let qgroup = [];
            let agroup = [];
            let pastY;

            function update() {
                localStorage.clear;
            }

            function CreateFlashcard() {
                questionnum += 1;

                const question = document.getElementById("Question");
                const answer = document.getElementById("Answer");
                const flashcard = document.getElementById('zilch');
                const container = document.getElementById('flashcard-container');
                const paragraph = flashcard.getElementsByTagName('p');
                const empty = '<div class="flashcard " id="zilch"><p></p><p style="opacity: 0;"></p><button id="reveal" onclick="RevealAnswer(this)">Reveal Answer</button></div>'
                
                const tanong = paragraph[0];
                const sagot = paragraph[1];

                const Qv = question.value;
                const Av = answer.value;

                localStorage.setItem('question' + questionnum, Qv)
                localStorage.setItem('answer' + questionnum, Av)

                tanong.textContent = localStorage.getItem('question' + questionnum)
                sagot.textContent = localStorage.getItem('answer' + questionnum)

                flashcard.id = 'Q' + questionnum;
                flashcard.lastChild.id = 'B' + questionnum;  

                container.innerHTML += empty;
            }          
            
            function RevealAnswer(x) {
                let button = document.getElementById(x.id);
                let div = button.parentNode;
                let divelem = div.children;

                div.children[1].style.opacity = '100';
            }

            function NewGroup() {
                groupnum += 1;
                const container = document.getElementById('flashcard-container');
                const newgroup = '<div class="group" name="group" id="zilch"><label for="group" class="group-label">Untitled Group ' + groupnum + ':</label><div class="flashcard " id="zilch"><p></p><p style="opacity: 0;"></p><button id="reveal" onclick="RevealAnswer(this)">Reveal Answer</button></div></div>'
                container.innerHTML += newgroup;
            }

            function NameGroup() {
                const groupname = document.getElementById('grpname-input').value
                localStorage.setItem('group' + groupnum, groupname)
            }

            function ThisString(qgroup, agroup) {
                if (localStorage.getItem('qgroup') != null || localStorage.getItem('agroup') != null) {
                    localStorage.removeItem('qgroup');
                    localStorage.removeItem('agroup');

                    localStorage.setItem('qgroup', JSON.stringify(qgroup));
                    localStorage.setItem('agroup', JSON.stringify(agroup));
                } else {
                    localStorage.setItem('qgroup', JSON.stringify(qgroup));
                    localStorage.setItem('agroup', JSON.stringify(agroup));
                } 
            }

        </script>
    </body>
</html>
